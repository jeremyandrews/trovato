{% extends "page--admin.html" %}

{% block content %}
<div class="admin-header">
    <h2>File: {{ file.filename }}</h2>
</div>

<nav class="breadcrumb">
    <a href="/admin/content/files">Files</a>
    &raquo;
    <span>{{ file.filename }}</span>
</nav>

<div class="admin-card">
    <div class="file-details">
        {% if file.filemime is starting_with("image/") %}
        <div class="file-preview">
            <img src="{{ public_url }}" alt="{{ file.filename }}" class="file-preview-image">
        </div>
        {% endif %}

        <dl class="file-info">
            <dt>Filename</dt>
            <dd>{{ file.filename }}</dd>

            <dt>MIME Type</dt>
            <dd>{{ file.filemime }}</dd>

            <dt>Size</dt>
            <dd>{{ (file.filesize / 1024) | round(precision=1) }} KB ({{ file.filesize }} bytes)</dd>

            <dt>URI</dt>
            <dd><code>{{ file.uri }}</code></dd>

            <dt>Public URL</dt>
            <dd><a href="{{ public_url }}" target="_blank">{{ public_url }}</a></dd>

            <dt>Owner</dt>
            <dd>{% if owner %}{{ owner.name }}{% else %}Unknown{% endif %}</dd>

            <dt>Status</dt>
            <dd>
                {% if file.status == "Permanent" %}
                <span class="status status--permanent">Permanent</span>
                {% else %}
                <span class="status status--temporary">Temporary</span>
                {% endif %}
            </dd>

            <dt>Uploaded</dt>
            <dd>{{ file.created | date(format="%Y-%m-%d %H:%M:%S") }}</dd>

            <dt>Changed</dt>
            <dd>{{ file.changed | date(format="%Y-%m-%d %H:%M:%S") }}</dd>
        </dl>
    </div>

    <div class="form-actions">
        <form method="post" action="/admin/content/files/{{ file.id }}/delete" style="display: inline;">
            <button type="submit" class="button button--danger" data-confirm="Are you sure you want to delete this file?">Delete file</button>
        </form>
        <a href="/admin/content/files" class="button button--secondary">Back to list</a>
    </div>
</div>

<style>
    .breadcrumb {
        margin: 0 0 1rem 0;
        font-size: 0.875rem;
    }
    .breadcrumb a {
        color: var(--primary);
    }
    .file-details {
        margin-bottom: 1.5rem;
    }
    .file-preview {
        margin-bottom: 1.5rem;
        background: #f5f5f5;
        padding: 1rem;
        border-radius: 0.25rem;
        text-align: center;
    }
    .file-preview-image {
        max-width: 100%;
        max-height: 400px;
        border-radius: 0.25rem;
    }
    .file-info {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 0.5rem 1rem;
        margin: 0;
    }
    .file-info dt {
        font-weight: 600;
        color: #666;
    }
    .file-info dd {
        margin: 0;
    }
    .status {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
    }
    .status--permanent {
        background: #d4edda;
        color: #155724;
    }
    .status--temporary {
        background: #fff3cd;
        color: #856404;
    }
    .button--danger {
        background: #dc3545;
        color: white;
        border: none;
    }
    .button--danger:hover {
        background: #c82333;
    }
</style>
{% endblock %}
